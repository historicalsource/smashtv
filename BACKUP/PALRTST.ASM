	CALLA	CLRPAL			;CLEAR PALETTES
	MOVI	32,A11
	MOVE	@WORLDTLX,A0,L		;GET STARTING COORD
	ADDI	>800000,A0
	MOVE	@WORLDTLY,A1,L
	ADDI	>800000,A1
	MOVI	PDTH1,A2 		;(OIMG)
	MOVI	>1CF,A3			;(OZPOS)
	MOVI	DMAWNZ,A4		;(OFLAGS) NON-ZERO VALUE
	MOVI	CLSNEUT,A5		;(OID) INITIALLY HARMLESS
	CLR	A6			;(XV)
	CLR	A7			;(YV)
	CALLA	BEGINOBJ2
	SLEEP	20
*A0= PALSRC = 32 BIT SOURCE ADDRESS OF PALETTE COLOR DATA 	
*A1= PALDEST = BIT 8-15 DESTINATION PALETTE | BIT 0-7 START COLOR
*A2= PLDCNT = 16 BIT COLOR COUNT
*RETURNS: EQ IF UNABLE TO SETUP TRANSFER, NE IF TRANSFER O.K.
*ZERO YOUR OLD PALETTE
PALTL
	MOVE	*A8(OPAL),A1,W
	SRL	8,A1
	SLL	8,A1
	MOVI	64,A2
	MOVI	ZEROPAL+>10,A0
	CALLA	PALSET
	SLEEP	10
	
	MOVE	A11,A0
	CALLA	GETFPAL
	JRNE	PALT1
	MOVE	A11,A0
	CALLA	GETBPAL
PALT1
	MOVE	A0,*A8(OPAL),W
	MOVE	A0,A1
	SRL	8,A1
	SLL	8,A1
	MOVI	64,A2
	MOVI	nup1+>10,A0
	CALLA	PALSET
	SLEEP	10
	DSJ	A11,PALTL
ZEROPAL	
	.WORD	64
	.LONG	0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
	.LONG	0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
